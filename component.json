{
    "title": "SugarCRM 7",
    "description": "SugarCRM REST API",
    "docsUrl": "https://github.com/elasticio/sugarcrm-component",
    "credentials": {
        "fields":{
            "baseUrl": {
                "label": "Your SugarCRM domain",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "userName": {
                "label": "Your login",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "password": {
                "label": "Your password",
                "required": true,
                "viewClass": "PasswordFieldView"
            },
            "clientID": {
                "label": "Your OAuth 2.0 Consumer Key",
                "required": true,
                "viewClass": "TextFieldView"
            },
            "clientSecret" : {
                "label": "Your OAuth 2.0 Consumer Secret",
                "required" : true,
                "viewClass": "PasswordFieldView"
            }
        }
    },
    "triggers": {
        "executeQueryTrigger": {
            "title": "Plain SugarCRM query",
            "main": "./lib/triggers/query.js",
            "type": "polling",
            "metadata": {
                "out": {}
            },
            "fields": {
                "query": {
                    "label": "Query",
                    "required": true,
                    "viewClass": "TextAreaWithNoteView",
                    "placeholder": "{\n  \"filter\":[\n    {\"name\":\"Nelson Inc\"}\n  ]\n}",
                    "note": "Complete list of query params you can get <a href='http://support.sugarcrm.com/Documentation/Sugar_Developer/Sugar_Developer_Guide_7.7/Integration/Web_Services/v10/Endpoints/modulefilter_POST/' target='_blank'>here</a>"

                },
                "module": {
                    "label": "Module",
                    "required": true,
                    "viewClass": "TextFieldView"
                }
            }
        },
        "getEntry": {
            "main": "./lib/triggers/getEntry.js",
            "type": "polling",
            "title": "Fetch new and updated objects",
            "description": "Get SugarCRM objects which have recently been modified or created",
            "dynamicMetadata": true,
            "fields" : {
                "module" : {
                    "label": "SugarCRM module to fetch",
                    "required": true,
                    "viewClass": "SelectView",
                    "model": "modules",
                    "prompt": "Select a SugarCRM module"
                },
                "newUpdatedOrAll" : {
                    "label": "T"
                }
            },
            "metadata": {
                "out": "./lib/schemas/getAccounts.out.json"
            }
        },
        "getContacts": {
            "main": "./lib/triggers/getContacts.js",
            "type": "polling",
            "title": "Query Contacts",
            "metadata": {
                "out": "./lib/schemas/getContacts.out.json"
            }
        },
        "getLeads": {
            "main": "./lib/triggers/getLeads.js",
            "type": "polling",
            "title": "Query Leads",
            "metadata": {
                "out": "./lib/schemas/getLeads.out.json"
            }
        },
        "getOpportunities": {
            "main": "./lib/triggers/getOpportunities.js",
            "type": "polling",
            "title": "Query Opportunities",
            "metadata": {
                "out": "./lib/schemas/getOpportunities.out.json"
            }
        },
        "getTasks": {
            "main": "./lib/triggers/getTasks.js",
            "type": "polling",
            "title": "Query Tasks",
            "metadata": {
                "out": "./lib/schemas/getTasks.out.json"
            }
        }
    },
    "actions": {
        "executeQueryAction": {
            "title": "Plain SugarCRM query",
            "main": "./lib/triggers/query.js",
            "metadata": {
                "out": {},
                "in": {
                     "type": "object",
                     "properties": {
                         "query": {
                             "maxLength": 20000,
                             "title": "Query",
                             "type": "string",
                             "required": true
                         },
                         "module": {
                             "maxLength": 100,
                             "title": "Module",
                             "type": "string",
                             "required": true
                         }
                     }
                }
            }
        },
        "createOrUpdateAccount": {
            "main": "./lib/actions/createOrUpdateAccount.js",
            "title": "Sync Account",
            "metadata": {
                "in": "./lib/schemas/createOrUpdateAccount.in.json",
                "out": "./lib/schemas/getAccounts.out.json"
            }
        },
        "createOrUpdateContact": {
            "main": "./lib/actions/createOrUpdateContact.js",
            "title": "Sync Contact",
            "metadata": {
                "in": "./lib/schemas/createOrUpdateContact.in.json",
                "out": "./lib/schemas/getContacts.out.json"
            }
        },
        "createOrUpdateLead": {
            "main": "./lib/actions/createOrUpdateLead.js",
            "title": "Sync Lead",
            "metadata": {
                "in": "./lib/schemas/createOrUpdateLead.in.json",
                "out": "./lib/schemas/getLeads.out.json"
            }
        },
        "createOrUpdateOpportunity": {
            "main": "./lib/actions/createOrUpdateOpportunity.js",
            "title": "Sync Opportunity",
            "metadata": {
                "in": "./lib/schemas/createOrUpdateOpportunity.in.json",
                "out": "./lib/schemas/getOpportunities.out.json"
            }
        },
        "createOrUpdateTask": {
            "main": "./lib/actions/createOrUpdateTask.js",
            "title": "Sync Task",
            "metadata": {
                "in": "./lib/schemas/createOrUpdateTask.in.json",
                "out": "./lib/schemas/getTasks.out.json"
            }
        }
    }
}
